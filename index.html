<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Fsharp-tutorial by ashtanyuk</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Fsharp-tutorial</h1>
      <h2 class="project-tagline">Краткое введение в F#</h2>
      <a href="https://github.com/ashtanyuk/FSharp-tutorial" class="btn">View on GitHub</a>
      <a href="https://github.com/ashtanyuk/FSharp-tutorial/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ashtanyuk/FSharp-tutorial/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="Краткое-введение-в-fsharp" class="anchor" href="#%D0%9A%D1%80%D0%B0%D1%82%D0%BA%D0%BE%D0%B5-%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-fsharp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Краткое введение в FSharp</h1>

<p><img src="./pics/fsharp256.png" alt=""></p>

<h2>
<a id="Введение" class="anchor" href="#%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Введение</h2>

<p><strong>F#</strong> (эф-шарп) разработан в <em>Microsoft Corporation</em> в 2005 году. Информация о языке и необходимое програмное обеспечение доступно по адресу <a href="">http://fsharp.org</a>. Имеется поддержка языка в популярном пакете разработчика <em>Visual Studio</em>, он также доступен для <em>Linux</em> и <em>Mac OS X</em>.</p>

<h2>
<a id="Особенности-программирования-на-fsharp" class="anchor" href="#%D0%9E%D1%81%D0%BE%D0%B1%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%BD%D0%B0-fsharp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Особенности программирования на FSharp</h2>

<ul>
<li>основное назначение языка: программирование в функциональном стиле, но есть поддержка императивного и объектно-ориентированного стилей;</li>
<li>отступы и пробелы имеют значение при форматировании кода;</li>
<li>доступен режим интерпретатора, в котором можно выполнить команды (REPL), но можно использовать традиционный компилятор для получения исполняемого файла;</li>
<li>язык F# многое взял от <strong>OCaml</strong>;</li>
<li>доступны типы и библиотека .NET;</li>
<li>язык имеет строгую типизацию.</li>
</ul>

<p><strong>Замечание</strong>
<em>Все дальнейшие примеры приведены для интерактивной оболочки. Символ '&gt;' всегда обозначает приглашение интерпретатора и не набирается пользователем</em></p>

<h2>
<a id="repl" class="anchor" href="#repl" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>REPL</h2>

<p>При использовании <strong>MS Visual Studio</strong> можно открыть окно <strong>F# interactive</strong> и вводить команды. Можно выделить в программе текст и послать его в REPL комбинацией: <em>Alt+Enter</em>.</p>

<p>Вне <em>Visual Studio</em> запустить интерпретатор можно программой <em>fsi</em>.</p>

<h2>
<a id="Примеры-использования-net" class="anchor" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-net" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Примеры использования .NET</h2>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">open</span> <span class="pl-en">System</span>;;
<span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">now</span> <span class="pl-k">=</span> DateTime.Now<span class="pl-k">;;</span>

<span class="pl-k">val</span> <span class="pl-smi">now</span> : <span class="pl-v">DateTime</span> <span class="pl-k">=</span> <span class="pl-c1">06.11</span>.<span class="pl-c1">2016</span> <span class="pl-c1">15</span><span class="pl-k">:</span><span class="pl-c1">29</span><span class="pl-k">:</span><span class="pl-c1">42</span>

<span class="pl-k">&gt;</span>Math.PI<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">float</span> <span class="pl-k">=</span> <span class="pl-c1">3.141592654</span></pre></div>

<h2>
<a id="Комментарии" class="anchor" href="#%D0%9A%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Комментарии</h2>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-c">// - однострочный комментарий</span>
<span class="pl-c"><span class="pl-c">(*</span></span>
<span class="pl-c"> Многострочный комментарий</span>
<span class="pl-c"> (может занимать несколько строк)</span>
<span class="pl-c"><span class="pl-c">*)</span></span></pre></div>

<h2>
<a id="Данные" class="anchor" href="#%D0%94%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Данные</h2>

<h3>
<a id="Стандартные-типы" class="anchor" href="#%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5-%D1%82%D0%B8%D0%BF%D1%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Стандартные типы</h3>

<p>Ниже перечислены основные типы с указанием суффиксов при связывании значений с именами:</p>

<ul>
<li>
<strong>byte</strong> - <em>uy</em> - беззнаковый байт</li>
<li>
<strong>sbyte</strong> - <em>y</em> - знаковый байт</li>
<li>
<strong>int16</strong> - <em>s</em> - короткое целое</li>
<li>
<strong>uint16</strong> - <em>us</em> - беззнаковое короткое целое</li>
<li>
<strong>int32</strong> - по-умолчанию - обычное целое</li>
<li>
<strong>uint32</strong> - <em>u</em> - беззнаковое целое</li>
<li>
<strong>int64</strong> - <em>L</em> - длинное целое</li>
<li>
<strong>uint64</strong> - <em>UL</em> -  беззнаковое длинное целое</li>
<li>
<strong>float32</strong> - <em>f</em> - вещественное одинарной точности</li>
<li>
<strong>float</strong> - вещественное двойной точности</li>
<li>
<strong>decimal</strong> - <em>M</em> - вещественное фиксированной точности (28 цифр после запятой)</li>
</ul>

<h3>
<a id="Присвоение-значений" class="anchor" href="#%D0%9F%D1%80%D0%B8%D1%81%D0%B2%D0%BE%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B9" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Присвоение значений</h3>

<p>Поскольку <strong>F#</strong> - функциональный язык, то переменные в классическом (императивном) смысле в нем не приветствуются. Просто вводится имя и этому имени присваивается значение, которое в дальнейшем не может быть изменено.</p>

<p>Примеры создания значений:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">let</span> <span class="pl-smi">a</span> <span class="pl-k">=</span> <span class="pl-c1">7</span>uy
<span class="pl-k">let</span> <span class="pl-smi">b</span> <span class="pl-k">=</span> <span class="pl-k">-</span><span class="pl-c1">18</span>s
<span class="pl-k">let</span> <span class="pl-smi">c</span> <span class="pl-k">=</span> <span class="pl-c1">0b1010101</span>y</pre></div>

<p>Примеры с возведением в степень:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">d</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>UL <span class="pl-c1">56</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">b</span> : <span class="pl-v">uint64</span> <span class="pl-k">=</span> <span class="pl-c1">72057594037927936</span>UL</pre></div>

<h3>
<a id="Преобразования-типов" class="anchor" href="#%D0%9F%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D1%82%D0%B8%D0%BF%D0%BE%D0%B2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Преобразования типов</h3>

<p>Явные преобразования типов необходимы, поскольку в языке практически отсутствуют неявные преобразования. </p>

<p>Функции преобразования имеют такие же названия, что и типы, например:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">e</span> <span class="pl-k">=</span> uint64 <span class="pl-c1">2</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">e</span> : <span class="pl-v">uint64</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>UL</pre></div>

<h3>
<a id="Сверхдлинные-числа" class="anchor" href="#%D0%A1%D0%B2%D0%B5%D1%80%D1%85%D0%B4%D0%BB%D0%B8%D0%BD%D0%BD%D1%8B%D0%B5-%D1%87%D0%B8%D1%81%D0%BB%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Сверхдлинные числа</h3>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">open</span> <span class="pl-en">System.<span class="pl-en">Numerics</span></span>;;
<span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">f</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>I <span class="pl-k">**</span> <span class="pl-c1">200</span> <span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">f</span> : <span class="pl-v">BigInteger</span> <span class="pl-k">=</span> 
  <span class="pl-c1">16069380442589902755419620923411626.</span><span class="pl-k">......</span></pre></div>

<h3>
<a id="Символы-и-строки" class="anchor" href="#%D0%A1%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D1%8B-%D0%B8-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Символы и строки</h3>

<p>Все символы хранятся в юникоде:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">ch</span> <span class="pl-k">=</span> <span class="pl-s">'л'</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">ch</span> : <span class="pl-v">char</span> <span class="pl-k">=</span> <span class="pl-s">'л'</span>
<span class="pl-k">&gt;</span> int ch<span class="pl-k">;;</span>
vat it <span class="pl-k">:</span> int <span class="pl-k">=</span> <span class="pl-c1">1083</span></pre></div>

<p>Строки:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">hello</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hello, world!<span class="pl-pds">"</span></span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">hello</span> : <span class="pl-v">string</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hello, world!<span class="pl-pds">"</span></span>
<span class="pl-k">&gt;</span> hello.<span class="pl-k">[</span><span class="pl-c1">1</span><span class="pl-k">]</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">char</span> <span class="pl-k">=</span> <span class="pl-s">'e'</span></pre></div>

<h2>
<a id="Структуры-данных" class="anchor" href="#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%8B-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Структуры данных</h2>

<p>В качестве <em>структур данных</em> выступают:</p>

<ul>
<li>списки (<em>lists</em>);</li>
<li>кортежи (<em>tupples</em>);</li>
<li>массивы (<em>arrays</em>);</li>
<li>последовательности (<em>sequences</em>);;</li>
</ul>

<h3>
<a id="Списки" class="anchor" href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BA%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Списки</h3>

<p>Списки являются основной структурой данных в функцинальных языках. </p>

<p>Задать список легко:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1</span><span class="pl-k">;</span><span class="pl-c1">2</span><span class="pl-k">;</span><span class="pl-c1">3</span><span class="pl-k">];;</span>
<span class="pl-k">val</span> <span class="pl-smi">list</span> : <span class="pl-v">int</span> <span class="pl-v">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1</span><span class="pl-k">;</span> <span class="pl-c1">2</span><span class="pl-k">;</span> <span class="pl-c1">3</span><span class="pl-k">]</span></pre></div>

<p>Можно указывать диапазоны значений:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1.</span>.<span class="pl-c1">10</span><span class="pl-k">];;</span>
<span class="pl-k">val</span> <span class="pl-smi">list</span> : <span class="pl-v">int</span> <span class="pl-v">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1</span><span class="pl-k">;</span> <span class="pl-c1">2</span><span class="pl-k">;</span> <span class="pl-c1">3</span><span class="pl-k">;</span> <span class="pl-c1">4</span><span class="pl-k">;</span> <span class="pl-c1">5</span><span class="pl-k">;</span> <span class="pl-c1">6</span><span class="pl-k">;</span> <span class="pl-c1">7</span><span class="pl-k">;</span> <span class="pl-c1">8</span><span class="pl-k">;</span> <span class="pl-c1">9</span><span class="pl-k">;</span> <span class="pl-c1">10</span><span class="pl-k">]</span>

<span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-s">'a'</span><span class="pl-k">..</span><span class="pl-s">'z'</span><span class="pl-k">];;</span>
<span class="pl-k">val</span> <span class="pl-smi">list</span> : <span class="pl-v">char</span> <span class="pl-v">list</span> <span class="pl-k">=</span>
  <span class="pl-k">[</span><span class="pl-s">'a'</span><span class="pl-k">;</span> <span class="pl-s">'b'</span><span class="pl-k">;</span> <span class="pl-s">'c'</span><span class="pl-k">;</span> <span class="pl-s">'d'</span><span class="pl-k">;</span> <span class="pl-s">'e'</span><span class="pl-k">;</span> <span class="pl-s">'f'</span><span class="pl-k">;</span> <span class="pl-s">'g'</span><span class="pl-k">;</span> <span class="pl-s">'h'</span><span class="pl-k">;</span> <span class="pl-s">'i'</span><span class="pl-k">;</span> <span class="pl-s">'j'</span><span class="pl-k">;</span> <span class="pl-s">'k'</span><span class="pl-k">;</span> <span class="pl-s">'l'</span><span class="pl-k">;</span> <span class="pl-s">'m'</span><span class="pl-k">;</span> <span class="pl-s">'n'</span><span class="pl-k">;</span> <span class="pl-s">'o'</span><span class="pl-k">;</span>
   <span class="pl-s">'p'</span><span class="pl-k">;</span> <span class="pl-s">'q'</span><span class="pl-k">;</span> <span class="pl-s">'r'</span><span class="pl-k">;</span> <span class="pl-s">'s'</span><span class="pl-k">;</span> <span class="pl-s">'t'</span><span class="pl-k">;</span> <span class="pl-s">'u'</span><span class="pl-k">;</span> <span class="pl-s">'v'</span><span class="pl-k">;</span> <span class="pl-s">'w'</span><span class="pl-k">;</span> <span class="pl-s">'x'</span><span class="pl-k">;</span> <span class="pl-s">'y'</span><span class="pl-k">;</span> <span class="pl-s">'z'</span><span class="pl-k">]</span></pre></div>

<p>Пример определения списка с шагом:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">lst</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1</span> <span class="pl-k">..</span> <span class="pl-c1">2</span> <span class="pl-k">..</span> <span class="pl-c1">10</span><span class="pl-k">];;</span>
<span class="pl-k">val</span> <span class="pl-smi">lst</span> : <span class="pl-v">int</span> <span class="pl-v">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1</span><span class="pl-k">;</span> <span class="pl-c1">3</span><span class="pl-k">;</span> <span class="pl-c1">5</span><span class="pl-k">;</span> <span class="pl-c1">7</span><span class="pl-k">;</span> <span class="pl-c1">9</span><span class="pl-k">]</span></pre></div>

<p>Мы можем использовать для создания списка <strong>генераторы</strong>, - специальные конструкции, заключенные в квадратные скобки:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">evens</span> <span class="pl-k">=</span> <span class="pl-k">[</span>
  <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">1.</span>.<span class="pl-c1">10</span> <span class="pl-k">do</span>
    <span class="pl-k">if</span> i % <span class="pl-c1">2</span> <span class="pl-k">=</span> <span class="pl-c1">0</span> <span class="pl-k">then</span>
      <span class="pl-k">yield</span> i
<span class="pl-k">]</span>
<span class="pl-k">val</span> <span class="pl-smi">evens</span> : <span class="pl-v">int</span> <span class="pl-v">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">2</span><span class="pl-k">;</span> <span class="pl-c1">4</span><span class="pl-k">;</span> <span class="pl-c1">6</span><span class="pl-k">;</span> <span class="pl-c1">8</span><span class="pl-k">;</span> <span class="pl-c1">10</span><span class="pl-k">]</span></pre></div>

<p>Вариант с использованием <em>лямбда-функции</em>:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">let</span> <span class="pl-smi">lst</span> <span class="pl-k">=</span> <span class="pl-k">[for</span> i <span class="pl-k">in</span> <span class="pl-c1">1.</span>.<span class="pl-c1">10</span> <span class="pl-k">-&gt;</span> i<span class="pl-k">*</span>i<span class="pl-k">]</span> <span class="pl-c">// [1, 4, 9,..]</span></pre></div>

<h3>
<a id="Кортежи" class="anchor" href="#%D0%9A%D0%BE%D1%80%D1%82%D0%B5%D0%B6%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Кортежи</h3>

<p>..</p>

<h3>
<a id="Массивы" class="anchor" href="#%D0%9C%D0%B0%D1%81%D1%81%D0%B8%D0%B2%D1%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Массивы</h3>

<p>..</p>

<h3>
<a id="Последовательности" class="anchor" href="#%D0%9F%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Последовательности</h3>

<p>..</p>

<h2>
<a id="Операторы-и-операции" class="anchor" href="#%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B-%D0%B8-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Операторы и операции</h2>

<p>В языке F# имеется набор операторов, поддерживающих управляющую логику и циклы.</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">..</span>
<span class="pl-k">let</span> <span class="pl-smi">choice</span> <span class="pl-v">a</span> <span class="pl-v">b</span> <span class="pl-k">=</span>
   <span class="pl-k">if</span> a<span class="pl-k">&gt;</span>b <span class="pl-k">then</span> <span class="pl-s">'a'</span> <span class="pl-k">else</span> <span class="pl-s">'b'</span></pre></div>

<p>Обработка списка циклом <strong>for</strong>:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">lst</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1.</span>.<span class="pl-c1">10</span><span class="pl-k">];;</span>
<span class="pl-k">val</span> <span class="pl-smi">lst</span> : <span class="pl-v">int</span> <span class="pl-v">list</span> <span class="pl-k">=</span> <span class="pl-k">[</span><span class="pl-c1">1</span><span class="pl-k">;</span> <span class="pl-c1">2</span><span class="pl-k">;</span> <span class="pl-c1">3</span><span class="pl-k">;</span> <span class="pl-c1">4</span><span class="pl-k">;</span> <span class="pl-c1">5</span><span class="pl-k">;</span> <span class="pl-c1">6</span><span class="pl-k">;</span> <span class="pl-c1">7</span><span class="pl-k">;</span> <span class="pl-c1">8</span><span class="pl-k">;</span> <span class="pl-c1">9</span><span class="pl-k">;</span> <span class="pl-c1">10</span><span class="pl-k">]</span>

<span class="pl-k">&gt;</span> <span class="pl-k">for</span> item <span class="pl-k">in</span> lst <span class="pl-k">do</span> printfn <span class="pl-pds">"</span><span class="pl-s"><span class="pl-c1">%A</span></span><span class="pl-pds">"</span> item<span class="pl-k">;;</span>
<span class="pl-c1">1</span>
<span class="pl-c1">2</span>
<span class="pl-c1">3</span>
<span class="pl-c1">4</span>
<span class="pl-c1">5</span>
<span class="pl-c1">6</span>
<span class="pl-c1">7</span>
<span class="pl-c1">8</span>
<span class="pl-c1">9</span>
<span class="pl-c1">10</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">unit</span> <span class="pl-k">=</span> <span class="pl-c1">()</span></pre></div>

<p>Оператор <strong>yield</strong> используется для возвращения элемента из функции или цикла, например, для формирования списка (см. пример в разделе "списки"). </p>

<h2>
<a id="Функции" class="anchor" href="#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Функции</h2>

<p>Для функционального языка программирования <strong>функция</strong> - центральное понятие.</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">square</span> <span class="pl-k">=</span> x <span class="pl-k">*</span> x<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">square</span> : <span class="pl-v">int</span> -&gt; <span class="pl-v">int</span>

<span class="pl-k">&gt;</span>square <span class="pl-c1">2</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">int</span> <span class="pl-k">=</span> <span class="pl-c1">4</span></pre></div>

<p>Функция <strong>square</strong> принимает параметр <em>int</em> и возвращает результат типа <em>int</em>.</p>

<p>Другая функция использует в работе ранее определенную:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">sum_of_squares</span> <span class="pl-v">x</span> <span class="pl-v">y</span> <span class="pl-k">=</span> square x <span class="pl-k">+</span> square y<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">sum_of_squares</span> : <span class="pl-v">x</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">y</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">int</span>

<span class="pl-k">&gt;</span> sum<span class="pl-k">_</span>of<span class="pl-k">_</span>squares <span class="pl-c1">3</span> <span class="pl-c1">4</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">int</span> <span class="pl-k">=</span> <span class="pl-c1">25</span></pre></div>

<p>Странный тип выражения становится понятным, если рассмотреть следующий пример:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">add</span> <span class="pl-v">x</span> <span class="pl-v">y</span> <span class="pl-k">=</span> x <span class="pl-k">+</span> y<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">add</span> : <span class="pl-v">int</span> -&gt; <span class="pl-v">int</span> -&gt; <span class="pl-v">int</span></pre></div>

<p>В данном случае функция <em>add</em> принимает два параметра и возвращает функцию, принимающую один параметр, возвращая, в свою очередь, целое число. Этот пример позволяет понять свойство <em>карриуемости</em>:</p>

<p>Функции могут быть <em>каррированными</em>, то есть в них не передается весь набор параметров сразу:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">add</span> <span class="pl-v">x</span> <span class="pl-v">y</span> <span class="pl-k">=</span> x <span class="pl-k">+</span> y<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">add</span> : <span class="pl-v">x</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">y</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">int</span>

<span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">inc</span> <span class="pl-k">=</span> add <span class="pl-c1">1</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">inc</span> : (<span class="pl-v">int</span> -&gt; <span class="pl-v">int</span>)

<span class="pl-k">&gt;</span> inc <span class="pl-c1">5</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">int</span> <span class="pl-k">=</span> <span class="pl-c1">6</span></pre></div>

<p>Можно явно указать типы параметров:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">add</span> (<span class="pl-v">x</span> : <span class="pl-v">float</span>) <span class="pl-v">y</span> <span class="pl-k">=</span> x <span class="pl-k">+</span> y<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">add</span> : <span class="pl-v">float</span> -&gt; <span class="pl-v">float</span> -&gt; <span class="pl-v">float</span></pre></div>

<p>Параметр обобщенного типа:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span><span class="pl-k">let</span> <span class="pl-smi">prn</span> (<span class="pl-v">x</span> : <span class="pl-v">'a</span>) <span class="pl-k">=</span> x<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">prn</span> : <span class="pl-v">'a</span> -&gt; <span class="pl-v">'a</span></pre></div>

<p>В качестве обобщенного типа может использоваться любой тип. </p>

<p>Безымянные функции (<em>лямбда-функции</em>) задаются без имени:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">fun</span> <span class="pl-v">x</span> <span class="pl-k">-&gt;</span> x <span class="pl-k">*</span> x<span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">x</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">int</span> <span class="pl-k">=</span> <span class="pl-k">&lt;</span><span class="pl-k">fun</span>:<span class="pl-v">clo</span>@9&gt;
&gt; <span class="pl-v">it</span> 6;;
<span class="pl-v">val</span> <span class="pl-v">it</span> : <span class="pl-v">int</span> = 36</pre></div>

<p>Лямбда-функции являются очень удобным инструментом при обработках элементов структур данных.</p>

<h4>
<a id="О-важности-пробелов-отступов" class="anchor" href="#%D0%9E-%D0%B2%D0%B0%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%BF%D1%80%D0%BE%D0%B1%D0%B5%D0%BB%D0%BE%D0%B2-%D0%BE%D1%82%D1%81%D1%82%D1%83%D0%BF%D0%BE%D0%B2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>О важности пробелов (отступов)</h4>

<p>В теле функции мы используем отступы, чтобы отделить внутренние определения от их использования:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span> <span class="pl-smi">mid</span> <span class="pl-v">x</span> <span class="pl-v">y</span> <span class="pl-k">=</span>
<span class="pl-k">-</span>   <span class="pl-k">let</span> <span class="pl-smi">sum</span> <span class="pl-v">a</span> <span class="pl-v">b</span> <span class="pl-k">=</span>
<span class="pl-k">-</span>     a <span class="pl-k">+</span> b
<span class="pl-k">-</span>   (sum x y) <span class="pl-k">/</span> <span class="pl-c1">2</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">mid</span> : <span class="pl-v">x</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">y</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">int</span>

<span class="pl-k">&gt;</span> mid <span class="pl-c1">4</span> <span class="pl-c1">2</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">int</span> <span class="pl-k">=</span> <span class="pl-c1">3</span></pre></div>

<h4>
<a id="Рекурсия" class="anchor" href="#%D0%A0%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D1%8F" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Рекурсия</h4>

<p><strong>Рекурсивные</strong> функции используются для реализации циклических алгоритмов:</p>

<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">&gt;</span> <span class="pl-k">let</span><span class="pl-k"> rec</span> <span class="pl-smi">factor</span> <span class="pl-v">n</span> <span class="pl-k">=</span> 
      <span class="pl-k">if</span> n<span class="pl-k">&lt;=</span><span class="pl-c1">1</span> <span class="pl-k">then</span> 
         <span class="pl-c1">1</span> 
      <span class="pl-k">else</span> 
         n <span class="pl-k">*</span> factor (n <span class="pl-k">-</span> <span class="pl-c1">1</span>)<span class="pl-k">;;</span>

<span class="pl-k">val</span> <span class="pl-smi">factor</span> : <span class="pl-v">n</span>:<span class="pl-v">int</span> -&gt; <span class="pl-v">int</span>

<span class="pl-k">&gt;</span> factor <span class="pl-c1">10</span><span class="pl-k">;;</span>
<span class="pl-k">val</span> <span class="pl-smi">it</span> : <span class="pl-v">int</span> <span class="pl-k">=</span> <span class="pl-c1">3628800</span></pre></div>

<h3>
<a id="Генераторы-списков" class="anchor" href="#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B-%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%BE%D0%B2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Генераторы списков</h3>

<p>Очень полезны <strong>генераторы</strong> (специальные функции для генерации значений):</p>

<p>..</p>

<h2>
<a id="Литература" class="anchor" href="#%D0%9B%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Литература</h2>

<ul>
<li>Крис Смит. <em>Программирование на F#</em>, Символ-Плюс, 2011.</li>
<li>Chris Smith. <em>Programming F#</em>, O'Reilly Media, 2009.</li>
<li>Jon Harrop, Don Syme. <em>F# for Scientists</em>, Wiley-Interscience, 2008.</li>
<li>Robert Pickering, Kit Eason. <em>Beginning F# 4.0</em>, Apress, 2016.</li>
<li>Dave Fancher. <em>The Book of F#: Breaking Free With Managed Functional Programming</em>, No Starch Press, 2014.</li>
<li>Adnan Masood. <em>Learning F# Functional Data Structures and Algorithms</em>, Packt, 2015.</li>
<li>Tomas Petricek, Phillip Trelford. <em>F# Deep Dives, Manning Publications</em>, 2014.</li>
<li>swlaschin. <em>F# for Fun and Profit</em>, GITBOOK</li>
<li>James Graff. <em>The Fsharp Handbook</em>, CreateSpace, 2016.</li>
<li>Tomas Petricek, Jon Skeet. <em>Real-World Functional Programming: With Examples in F# and C#</em>, Manning Publications, 2010.</li>
<li>Robert Pickering. <em>Foundations of F#</em>, Apress, 2007.</li>
<li>Robert Pickering. <em>Beginning F#</em>, Apress, 2009.</li>
<li>Don Syme. <em>Expert F#</em>, Apress, 2007.</li>
<li>Michael R. Hansen, Hans Rischel. <em>Functional Programming Using F#</em>, Cambridge Press, 2013.</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ashtanyuk/FSharp-tutorial">Fsharp-tutorial</a> is maintained by <a href="https://github.com/ashtanyuk">ashtanyuk</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
